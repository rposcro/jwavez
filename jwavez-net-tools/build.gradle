/*
 * This file was generated by the Gradle 'init' task.
 */

plugins {
    id 'com.jwavez.java-conventions'
}

dependencies {
    implementation project(':jwavez-core')
    implementation project(':jwavez-serial')
    implementation 'commons-cli:commons-cli:1.4'
}

description = 'jwavez-net-tools'

jar {
    manifest {
        attributes (
                "Implementation-Title": "JWaaveZ Net Tools",
                "Implementation-Version": archiveVersion,
                "Main-Class": "com.rposcro.jwavez.tools.cli.ZWaveCLI"
        )
    }
    from {
        configurations.runtimeClasspath.collect {
            exclude "META-INF/*"
            it.isDirectory() ? it : zipTree(it)
        }
    }
}

task _packCreateDir {
    doLast {
        mkdir "$buildDir/jwz"
    }
}

task _packCopyArchives(type: Copy) {
    dependsOn _packCreateDir
    from(jar.archiveFile) {
        rename { fileName -> jar.archiveBaseName.get() << ".jar" }
    }
    from("src/main/bash") {
        include "*"
    }
    into "$buildDir/jwz"
}

task pack {
    dependsOn _packCopyArchives
}

task deployLocal(type: Copy) {
    dependsOn _packCopyArchives
    from("$buildDir/jwz") {
        include "*"
    }
    into "file://" + System.properties["user.home"] + "/bin"
}
